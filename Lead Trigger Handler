public with sharing class LeadTriggerHandler 
{
    public static void createTaskAfterInsert(List<Lead> newLeads) {
        List<Task> NewTasks = new List<Task>();
        for (Lead l : newLeads)
            
        {
            Task t = new Task();
            t.Subject = 'Follow up with ' + l.FirstName + ' ' + l.LastName + ' ' + 'Lead!';
            t.WhoId = l.Id;
            t.OwnerId = l.OwnerId ;
            t.Priority = 'Normal';
            t.Status = 'Not Started';
            t.Description = 'Please follow up this Lead with Product Interest: ' + l.ProductInterest__c + '.';
           
            NewTasks.add(t);
        }
        insert NewTasks;
    }
    

public static void createTaskAfterUpdate(List<Lead> newLeads, Map<Id, Lead> oldLeadMap) {
    
    List<Task> Newtasks = new List<Task>();
    for (Lead l : newLeads) 
    {
        Lead oldLead = oldLeadMap.get(l.Id);
        
        if (l.ProductInterest__c != oldLead.ProductInterest__c)
        {
            Task t = new Task();
            t.Subject = 'Follow up with ' + l.FirstName + ' ' + l.LastName + ' ' + 'Lead!';
            t.WhoId = l.Id;
            t.OwnerId = l.OwnerId ;
            t.Priority = 'Normal';
            t.Status = 'Not Started';
            t.Description = 'Please follow up this Lead with Product Interest: ' + l.ProductInterest__c + '.' ;
            
            Newtasks.add(t);
        }
        insert Newtasks;
    }
}
}
